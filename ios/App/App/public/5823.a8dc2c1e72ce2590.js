"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5823],{5823:(v,u,s)=>{s.r(u),s.d(u,{LoginModule:()=>L});var c=s(6895),p=s(4556),r=s(433),g=s(5638),_=s(655),b=s(2340),x=s(463),d=s(7579),C=s(2722),t=s(8256),O=s(2684);function M(e,l){1&e&&t._UZ(0,"ion-spinner",22)}function P(e,l){if(1&e&&(t.TgZ(0,"div",23),t._UZ(1,"ion-icon",24),t.TgZ(2,"span",25),t._uU(3),t.qZA()()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("name",n.currentStatusIcon),t.xp6(2),t.Oqu(n.uploadStatus.message)}}function T(e,l){1&e&&t._UZ(0,"ion-spinner",22)}function Z(e,l){if(1&e&&(t.TgZ(0,"div",23),t._UZ(1,"ion-icon",24),t.TgZ(2,"span",25),t._uU(3),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("name",n.currentStatusIcon),t.xp6(2),t.Oqu(n.uploadStatus.message)}}function y(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",26)(3,"ion-button",27),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.closeModel())}),t._uU(4,"Close"),t.qZA()()()(),t.TgZ(5,"ion-content",28)(6,"div",29)(7,"h2")(8,"label",30),t._uU(9,"Verification Code"),t.qZA()(),t.TgZ(10,"div",31)(11,"p"),t._uU(12,"OTP sent to your email (valid for 5 minutes)."),t.qZA()(),t.TgZ(13,"div",32)(14,"input",33,34),t.NdJ("input",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.restrictmaxNumber(i,"otp1"))}),t.qZA(),t.TgZ(16,"input",35),t.NdJ("input",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.restrictmaxNumber(i,"otp2"))}),t.qZA(),t.TgZ(17,"input",36),t.NdJ("input",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.restrictmaxNumber(i,"otp3"))}),t.qZA(),t.TgZ(18,"input",37),t.NdJ("input",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.restrictmaxNumber(i,"otp4"))}),t.qZA()()(),t.TgZ(19,"div",11)(20,"ion-button",38),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.verifyOTP())}),t._uU(21),t.YNc(22,T,1,0,"ion-spinner",13),t.qZA()(),t.YNc(23,Z,4,2,"div",20),t.qZA()}if(2&e){const n=t.oxw();t.xp6(13),t.Q6J("formGroup",n.otpgroup),t.xp6(7),t.Q6J("disabled",!n.validate()),t.xp6(1),t.hij(" ",n.loading?"Verifying":"Verify"," "),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.uploadStatus.status)}}const k=[{path:"",component:(()=>{class e{constructor(n,o,i,a,f){this.router=n,this.service=o,this.actionSheetCtrl=i,this._https=a,this.fb=f,this.visiblepass=!1,this.isPersonalDetailsModelOpen=!1,this.currentStatusIcon="",this.uploadStatus={status:!1,message:"",statusType:""},this.loading=!1,this.statusIcons=[{name:"checkmark-circle-outline",status:"success"},{name:"close-circle-outline",status:"failed"},{name:"information-circle-outline",status:"info"}],this._unsubscribeAll=new d.x}showpassword(){this.visiblepass=!this.visiblepass}ngOnInit(){this.otpgroup=this.fb.group({otp1:["",r.kI.required],otp2:["",r.kI.required],otp3:["",r.kI.required],otp4:["",r.kI.required]}),this.loginForm=this.fb.group({username:["",r.kI.required],password:["",r.kI.required]})}restrictmaxNumber(n,o){const i=this.otpgroup.get(o);if(i.value.toString().length>1){const f=i.value.toString().slice(0,1);i.patchValue(f)}const a=n.target.nextElementSibling;a&&"INPUT"===a.tagName&&a.focus()}LogiinWithGoogle(){this.otpgroup.reset(),this.isPersonalDetailsModelOpen=!0;const n=document.getElementById("otp1");n&&n.focus(),window.open(b.N.nodeApi+"google","_blank")}login(){this.service.login()}closeModel(){this.isPersonalDetailsModelOpen=!1}validate(){return!!this.otpgroup.valid}getOTP(){return(0,_.mG)(this,void 0,void 0,function*(){if(!this.loginForm.valid)return void this.openSnackbar({status:!0,message:"Please enter your username and password",statusType:"failed"});this.loading=!0;const n=new x.i;n.RequestUrl="Login",n.RequestObject=this.loginForm.value,yield this._https.PostData(n).pipe((0,C.R)(this._unsubscribeAll)).subscribe(o=>{if(null!=o){if(this.loading=!1,200!==o.status)return void this.openSnackbar({status:!0,message:o.response,statusType:"failed"});this.loginForm.reset(),this.isPersonalDetailsModelOpen=!0}},o=>{},()=>{})})}verifyOTP(){var n,o,i,a;return(0,_.mG)(this,void 0,void 0,function*(){this.loading=!0;const f=(null===(n=this.otpgroup.get("otp1"))||void 0===n?void 0:n.value)+""+(null===(o=this.otpgroup.get("otp2"))||void 0===o?void 0:o.value)+(null===(i=this.otpgroup.get("otp3"))||void 0===i?void 0:i.value)+(null===(a=this.otpgroup.get("otp4"))||void 0===a?void 0:a.value),A={otp:parseInt(f)},h=new x.i;h.RequestUrl="verifyOTP",h.RequestObject=A,yield this._https.PostData(h).pipe((0,C.R)(this._unsubscribeAll)).subscribe(m=>{if(null!=m){if(this.loading=!1,200!==m.status)return void this.openSnackbar({status:!0,message:m.response,statusType:"failed"});this.isPersonalDetailsModelOpen=!1,this.otpgroup.reset();const U=`/sucessfull/${m.response.userId}/${m.response.token}`;setTimeout(()=>{this.router.navigate([U])},100)}},m=>{},()=>{})})}openSnackbar(n){this.uploadStatus=n,this.currentStatusIcon=this.statusIcons.filter(o=>o.status==this.uploadStatus.statusType)[0].name,this.uploadStatus.status=!0,setTimeout(()=>{this.uploadStatus.status=!1},2e3)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.F0),t.Y36(O.Q),t.Y36(p.BX),t.Y36(O.Q),t.Y36(r.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:33,vars:7,consts:[["id","white-background",3,"fullscreen"],[1,"container"],[1,"login-card"],["mat-card-image","","src","assets/login/login.webp","height","250px","alt","Photo of a login page"],[3,"formGroup"],[1,"field"],[1,"prefix"],["src","assets/login/user.png","alt","","width","20px"],["type","text","required","","placeholder","Enter Email","formControlName","username","autocomplete","off"],["alt","","width","20px",3,"src","click"],["placeholder","Enter Password","formControlName","password","autocomplete","off",3,"type"],[1,"center"],["expand","block","color","warn","shape","round",1,"submit",3,"click"],["class","spinner","slot","end","name","crescent",4,"ngIf"],[1,"signin"],[2,"padding","unset","margin","unset","margin-top","10px","margin-bottom","10px"],["id","open-modal","expand","block","color","light","shape","round",3,"click"],["src","assets/google-preview.png","width","100px","alt","",2,"margin-bottom","-5px"],[1,"link"],["routerLink","/register"],["class","card",4,"ngIf"],[3,"isOpen"],["slot","end","name","crescent",1,"spinner"],[1,"card"],["size","large",3,"name"],[1,"message"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"verification-code"],[1,"control-label"],[1,"otp-message"],[1,"verification-code--inputs",3,"formGroup"],["type","number","maxlength","1","id","otp1","formControlName","otp1",3,"input"],["otp1",""],["type","number","maxlength","1","id","otp2","formControlName","otp2",3,"input"],["type","number","maxlength","1","id","otp3","formControlName","otp3",3,"input"],["type","number","maxlength","1","id","otp4","formControlName","otp4",3,"input"],["color","warn","shape","round",1,"submit",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"form",4)(5,"div",5)(6,"span",6),t._UZ(7,"img",7),t.qZA(),t._UZ(8,"input",8),t.qZA(),t.TgZ(9,"div",5)(10,"span",6)(11,"img",9),t.NdJ("click",function(){return o.showpassword()}),t.qZA()(),t._UZ(12,"input",10),t.qZA(),t.TgZ(13,"div",11)(14,"ion-button",12),t.NdJ("click",function(){return o.getOTP()}),t._uU(15,"Continue "),t.YNc(16,M,1,0,"ion-spinner",13),t.qZA()(),t.TgZ(17,"div",14)(18,"p",15),t._uU(19,"Or sign in with"),t.qZA(),t.TgZ(20,"div",11)(21,"ion-button",16),t.NdJ("click",function(){return o.LogiinWithGoogle()}),t._UZ(22,"img",17),t.qZA()()(),t._UZ(23,"hr"),t.TgZ(24,"div",14)(25,"span"),t._uU(26,"Don't have an account?"),t.qZA(),t.TgZ(27,"span",18)(28,"a",19),t._uU(29,"Register here"),t.qZA()()()()()(),t.YNc(30,P,4,2,"div",20),t.TgZ(31,"ion-modal",21),t.YNc(32,y,24,5,"ng-template"),t.qZA()()),2&n&&(t.Q6J("fullscreen",!0),t.xp6(4),t.Q6J("formGroup",o.loginForm),t.xp6(7),t.Q6J("src",o.visiblepass?"assets/login/visible.png":"assets/login/hide.png",t.LSH),t.xp6(1),t.Q6J("type",o.visiblepass?"text":"password"),t.xp6(4),t.Q6J("ngIf",o.loading),t.xp6(14),t.Q6J("ngIf",o.uploadStatus.status),t.xp6(1),t.Q6J("isOpen",o.isPersonalDetailsModelOpen))},dependencies:[c.O5,g.rH,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.PQ,p.sr,p.ki,p.Fo,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center}.pb-2[_ngcontent-%COMP%]{padding-bottom:10px!important}.login-card[_ngcontent-%COMP%]{max-width:100%;position:unset;top:unset;left:unset;transform:unset;-webkit-transform:unset;-moz-transform:unset;-ms-transform:unset;-o-transform:unset}input[_ngcontent-%COMP%]:-webkit-autofill{box-shadow:0 0 0 1000px #fff inset!important;-webkit-box-shadow:0 0 0 1000px white inset!important}form[_ngcontent-%COMP%]{text-align:center}input[_ngcontent-%COMP%]{padding:10px 20px 10px 40px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box;border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px}input[_ngcontent-%COMP%]:focus{border:1px solid #ccc;outline:unset}button[_ngcontent-%COMP%]:focus{color:#3498db;box-shadow:inset 2px 2px 5px #babecc,inset -5px -5px 10px rgba(255,255,255,.45)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.spinner[_ngcontent-%COMP%]{margin-left:10px}.submit[_ngcontent-%COMP%]{margin-top:15px;width:60%;gap:10px!important;display:flex;align-content:center;background-color:#f44336;border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px}.prefix[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;margin:16px 16px 16px 13px}.signin[_ngcontent-%COMP%]{display:grid;margin-bottom:20px}.signin[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;align-items:center;cursor:pointer}.verification-code[_ngcontent-%COMP%]{max-width:300px;position:relative;margin:10px auto;text-align:center}.control-label[_ngcontent-%COMP%]{display:block;font-weight:900}.verification-code--inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.verification-code--inputs[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{border:2px solid #e1e1e1;width:46px;height:46px;padding:10px;text-align:center;display:inline-block;box-sizing:border-box;border-radius:unset}.card[_ngcontent-%COMP%]{position:fixed;width:85%;bottom:10%;z-index:1000;animation:_ngcontent-%COMP%_snackbar .3s cubic-bezier(.215,.61,.355,1);background:white;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in}@keyframes _ngcontent-%COMP%_snackbar{0%{left:-200px}50%{left:10px}to{left:18px}}.otp-message[_ngcontent-%COMP%]{text-align:center;margin-bottom:5px}.otp-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555}ion-toolbar[_ngcontent-%COMP%]{--border-width:unset !important}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(k),g.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,w,p.Pc,r.u5,r.UX]}),e})()},463:(v,u,s)=>{s.d(u,{i:()=>c});class c{}},2722:(v,u,s)=>{s.d(u,{R:()=>_});var c=s(4482),p=s(5403),r=s(8421),g=s(5032);function _(b){return(0,c.e)((x,d)=>{(0,r.Xf)(b).subscribe((0,p.x)(d,()=>d.complete(),g.Z)),!d.closed&&x.subscribe(d)})}}}]);