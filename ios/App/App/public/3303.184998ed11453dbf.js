"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3303],{3303:(C,p,i)=>{i.r(p),i.d(p,{EventsModule:()=>S});var d=i(6895),s=i(2078),l=i(433),m=i(5638),g=i(655),h=i(463),b=i(7579),u=i(2722),t=i(8256),T=i(2684);function E(o,c){if(1&o&&(t.TgZ(0,"ion-select-option",21),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.classNamme)}}function P(o,c){if(1&o&&(t.TgZ(0,"ion-select-option",21),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.lec_title)}}function y(o,c){1&o&&t._UZ(0,"ion-spinner",22)}function Z(o,c){if(1&o&&(t.TgZ(0,"div",23),t._UZ(1,"ion-icon",24),t.TgZ(2,"span",25),t._uU(3),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("name",e.currentStatusIcon),t.xp6(2),t.Oqu(e.uploadStatus.message)}}const x={queryParams:{reload:"true"}},D=[{path:"",component:(()=>{class o{constructor(e,n,a,r,f){this.router=e,this.service=n,this.fb=a,this.ActivatedRoute=r,this.loadingCtrl=f,this.lecturesData=[],this.classData=[],this.uploading=!1,this.uploadStatus={status:!1,message:"",statusType:""},this.statusIcons=[{name:"checkmark-circle-outline",status:"success"},{name:"close-circle-outline",status:"failed"},{name:"information-circle-outline",status:"info"}],this.currentStatusIcon="",this._unsubscribeAll=new b.x,this.createCalenderGroup()}ngOnInit(){this.createCalenderGroup(),this.fetchClassDetails(),this.ActivatedRoute.queryParams.subscribe(e=>{"true"===e.reload&&this.fetchClassDetails()})}dateTimeUpdated(e){var n,a,r,f;const v=new Date(e.detail.value),I=v.toTimeString().split(" ")[0].slice(0,-3),O=String(v.getDate()).padStart(2,"0"),M=String(v.getMonth()+1).padStart(2,"0"),U=`${O}-${M}-${v.getFullYear()}`,q=new Date(2023,parseInt(M)-1,1).toLocaleString("default",{month:"short"}),_=this.calenderGroup;null===(n=_.get("day"))||void 0===n||n.patchValue(parseInt(O)),null===(a=_.get("time"))||void 0===a||a.patchValue(I),null===(r=_.get("month"))||void 0===r||r.patchValue(q),null===(f=_.get("date"))||void 0===f||f.patchValue(U)}createEvent(){return(0,g.mG)(this,void 0,void 0,function*(){if(!this.calenderGroup.valid)return void this.openSnackbar({status:!0,message:"Fill all the details!",statusType:"failed"});this.uploading=!0;const e=yield this.loadingCtrl.create({message:"Creating event...",duration:0});e.present();const n=this.calenderGroup.value,a=new h.i;a.RequestUrl="upsertCalenderDetails",a.RequestObject=n,yield this.service.PostData(a).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{if(null!=r){if(e.dismiss(),200!==r.status)return void this.openSnackbar({status:!0,message:r.response,statusType:"failed"});this.uploading=!1,this.openSnackbar({status:!0,message:"Event created successfully",statusType:"success"})}},r=>{},()=>{})})}createCalenderGroup(){this.calenderGroup=this.fb.group({classId:["",l.kI.required],lec_id:["",l.kI.required],day:["",l.kI.required],time:["",l.kI.required],month:["",l.kI.required],title:["",l.kI.required],date:["",l.kI.required]})}fetchClassDetails(){return(0,g.mG)(this,void 0,void 0,function*(){const e=new h.i;e.RequestUrl="classDetails",e.RequestObject="",yield this.service.fetchData(e).pipe((0,u.R)(this._unsubscribeAll)).subscribe(n=>{if(null!=n){if(200!==n.status)return;this.classData=n.response||[]}},n=>{},()=>{})})}backToCalender(){this.router.navigate(["/tabs/calender"],x)}getSubjectsByclassId(e){return(0,g.mG)(this,void 0,void 0,function*(){const n=e?e.target.value:null;n&&this.fetchlectureDetails(n)})}fetchlectureDetails(e){return(0,g.mG)(this,void 0,void 0,function*(){const n=new h.i;n.RequestUrl="lectureDetails/"+e,n.RequestObject="",yield this.service.fetchData(n).pipe((0,u.R)(this._unsubscribeAll)).subscribe(a=>{if(null!=a){if(200!==a.status)return;this.lecturesData=a.response||[]}},a=>{},()=>{})})}openSnackbar(e){this.uploadStatus=e,this.currentStatusIcon=this.statusIcons.filter(n=>n.status==this.uploadStatus.statusType)[0].name,this.uploadStatus.status=!0,setTimeout(()=>{this.uploadStatus.status=!1},2e3)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.F0),t.Y36(T.Q),t.Y36(l.qu),t.Y36(m.gz),t.Y36(s.HT))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-events"]],decls:40,vars:11,consts:[[3,"translucent"],["slot","start"],["name","chevron-back-outline",3,"click"],["id","white-background",1,"ion-padding",3,"fullscreen"],[3,"formGroup"],["fill",""],["position","floating"],["formControlName","title","placeholder","Enter text"],[1,"tabs"],[1,"tab"],["for","chck3",1,"tab-label"],["type","checkbox","id","chck3"],[1,"tab-content"],["displayFormat","DD.MM.YYYY HH:mm",3,"showDefaultButtons","ionChange"],["formControlName","classId","placeholder","Select Class",3,"multiple","ionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lec_id","placeholder","Select Lecture",3,"multiple"],["expand","block",2,"margin-top","20px",3,"click"],["slot","start","name","cloud-upload-outline"],["name","lines-sharp-small",4,"ngIf"],["class","card",4,"ngIf"],[3,"value"],["name","lines-sharp-small"],[1,"card"],["size","large",3,"name"],[1,"message"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," Create Events "),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-icon",2),t.NdJ("click",function(){return n.backToCalender()}),t.qZA()()()(),t.TgZ(6,"ion-content",3)(7,"ion-card-content",4)(8,"ion-list")(9,"ion-item",5)(10,"ion-label",6),t._uU(11,"Event Name"),t.qZA(),t._UZ(12,"ion-input",7),t.qZA()(),t.TgZ(13,"ion-list")(14,"ion-item",5)(15,"div",8)(16,"div",9)(17,"label",10),t._uU(18,"Date & Time"),t.qZA()()()(),t.TgZ(19,"div",9),t._UZ(20,"input",11),t.TgZ(21,"div",12)(22,"ion-datetime",13),t.NdJ("ionChange",function(r){return n.dateTimeUpdated(r)}),t.qZA()()()(),t.TgZ(23,"ion-list")(24,"ion-item",5)(25,"ion-label",6),t._uU(26,"Class"),t.qZA(),t.TgZ(27,"ion-select",14),t.NdJ("ionChange",function(r){return n.getSubjectsByclassId(r)}),t.YNc(28,E,2,2,"ion-select-option",15),t.qZA()()(),t.TgZ(29,"ion-list")(30,"ion-item",5)(31,"ion-label",6),t._uU(32,"Lecture"),t.qZA(),t.TgZ(33,"ion-select",16),t.YNc(34,P,2,2,"ion-select-option",15),t.qZA()()(),t.TgZ(35,"ion-button",17),t.NdJ("click",function(){return n.createEvent()}),t._UZ(36,"ion-icon",18),t._uU(37),t.YNc(38,y,1,0,"ion-spinner",19),t.qZA(),t.YNc(39,Z,4,2,"div",20),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("formGroup",n.calenderGroup),t.xp6(15),t.Q6J("showDefaultButtons",!0),t.xp6(5),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",n.classData),t.xp6(5),t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",n.lecturesData),t.xp6(3),t.hij(" ",n.uploading?"Saving ":"Save"," "),t.xp6(1),t.Q6J("ngIf",n.uploading),t.xp6(1),t.Q6J("ngIf",n.uploadStatus.status))},dependencies:[d.sg,d.O5,s.YG,s.Sm,s.FN,s.W2,s.x4,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.q_,s.t9,s.n0,s.PQ,s.wd,s.sr,s.QI,s.j9,l.JJ,l.JL,l.sg,l.u],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{position:fixed;width:85%;bottom:0;z-index:1000;animation:_ngcontent-%COMP%_snackbar .3s cubic-bezier(.215,.61,.355,1);background:transparent;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:al .3s ease-in}@keyframes _ngcontent-%COMP%_snackbar{0%{left:-200px}50%{left:10px}to{left:18px}}  .calendar-body .calendar-month .calendar-month-grid{grid-template-rows:unset!important}body[_ngcontent-%COMP%]{color:#fff;background:white;padding:0 1em 1em}h1[_ngcontent-%COMP%]{margin:0;line-height:2;text-align:center}h2[_ngcontent-%COMP%]{margin:0 0 .5em;font-weight:400}input[_ngcontent-%COMP%]{position:absolute;opacity:0;z-index:-1}.row[_ngcontent-%COMP%]{display:flex}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex:1}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]:last-child{margin-left:1em}.tabs[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;width:100%}.tab[_ngcontent-%COMP%]{width:100%;color:#000;overflow:hidden}.tab-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background:white;cursor:pointer}.tab-label[_ngcontent-%COMP%]:after{content:"\\276f";width:1em;height:1em;text-align:center;transition:all .35s}.tab-content[_ngcontent-%COMP%]{max-height:0;padding:0 1em;color:#000;background:white;transition:all .35s}.tab-close[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1em;font-size:.75em;background:white;cursor:pointer}input[_ngcontent-%COMP%]:checked + .tab-label[_ngcontent-%COMP%]:after{transform:rotate(90deg)}input[_ngcontent-%COMP%]:checked ~ .tab-content[_ngcontent-%COMP%]{max-height:100vh;padding:1em}.default-rotated[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.default-rotated[_ngcontent-%COMP%]:after{content:""}.default-opened[_ngcontent-%COMP%]{max-height:100vh;padding:1em}']}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(D),m.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,k,s.Pc,l.u5,l.UX]}),o})()},463:(C,p,i)=>{i.d(p,{i:()=>d});class d{}},2722:(C,p,i)=>{i.d(p,{R:()=>g});var d=i(4482),s=i(5403),l=i(8421),m=i(5032);function g(h){return(0,d.e)((b,u)=>{(0,l.Xf)(h).subscribe((0,s.x)(u,()=>u.complete(),m.Z)),!u.closed&&b.subscribe(u)})}}}]);